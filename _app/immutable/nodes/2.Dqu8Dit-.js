import{f as R,a as F,c as Me}from"../chunks/CdXyPVf1.js";import{E as ge,A as L,D as me,I as f,K as c,J as p,B as o,G as D,H as ve,C as k,aJ as Ze,F as ze,u as Se,aH as be,af as fe,aC as ht}from"../chunks/CIcfCS9e.js";import{d as Ee,e as Pe}from"../chunks/CMrQpYvR.js";import{p as ue,b as St,i as Z}from"../chunks/Bp05Fg2P.js";import{r as le,s as je}from"../chunks/DVberjZs.js";import{f as Ut,s as we,e as xe,Z as Bt,B as qt,i as Fe,t as Ke,F as Ie,v as kt,k as Ue,T as st,b as xt,D as Je,c as Te,q as ot,G as Ve,u as Ht,l as mt,m as bt,n as _t,o as at,r as yt,x as Yt,y as Zt,z as Kt,H as lt,d as Ye,j as Xt,A as Wt,h as Jt,E as Qt,U as $t}from"../chunks/BaOQz20K.js";import{s as J}from"../chunks/BR9ubxrB.js";import{b as Ft,A as Dt}from"../chunks/LF6JFb3L.js";import{r as Et}from"../chunks/DYCF5JE_.js";import{g as en}from"../chunks/m9lK8jp6.js";const tn=!0,ps=Object.freeze(Object.defineProperty({__proto__:null,prerender:tn},Symbol.toStringTag,{value:"Module"}));var nn=R('<p class="uno-133tx6"> </p>'),rn=R('<div class="uno-1hpqvn"><div class="uno-wfkxha"></div> <p class="uno-133tx6"> </p> <!></div>'),sn=R('<div class="uno-0uncsh"><p class="uno-e8d28c"> </p> <p class="uno-4w2as4">Extension: <span class="uno-u618z0"> </span> â†’ Detected type: <span class="uno-u618z0"> </span></p></div>'),an=R('<div class="uno-70vcd5"><p class="uno-iik7i5"> </p> <div class="uno-3yjag0"></div></div>'),on=R('<div class="uno-h4fy2t"><button><h1 class="uno-21tubf">Folder Selector</h1> <input class="uno-rcrjh3" type="file"/></button> <!> <!></div>');function ln(n,t){ge(t,!0),Ut({useWebWorkers:!1});let e=ue(t,"selectedFiles",15,null),r=ue(t,"class",3,""),s=L(null),a=L(!1),i=L(null),d=L(me([])),l=L(!1);const u=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/vnd.comicbook+zip","application/zip","application/json","text/xml"],_=["jpg","jpeg","png","gif","webp","cbz","zip","xml"];async function h(E){const S=E.name.split(".").pop()?.toLowerCase();if(!(S==="cbz")&&!(S==="zip"))throw new Error(`Unsupported archive format: ${S}`);console.log(`Extracting ${S} file:`,E.name);const m=new Bt(new qt(E)),b=await m.getEntries(),N=[],v=E.name.replace(/\.(cbz|zip)$/i,""),A=E.webkitRelativePath||E.name;for(const U of b){if(!U.filename||U.directory)continue;k(i,U.filename,!0);const q=U.filename.split(".").pop()?.toLowerCase();if(!q||!_.includes(q))continue;const X=new TransformStream,se=new Response(X.readable).blob();await U.getData(X.writable);let K=await se;if(!K.type){const _e=P(q);K=new Blob([K],{type:_e})}const Q=U.filename,ie=Q.split("/").pop()??Q,ne=A.includes("/")?`${A.split("/").slice(0,-1).join("/")}/${v}/${Q}`:`${v}/${Q}`,oe=new File([K],ie,{type:K.type});Object.defineProperty(oe,"webkitRelativePath",{value:ne,writable:!1,enumerable:!0,configurable:!0}),N.push(oe)}return await m.close(),k(i,null),N}function P(E){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp"}[E]||"application/octet-stream"}async function M(E){const S=await E.slice(0,12).arrayBuffer(),g=new Uint8Array(S);return g.length>=8&&g[0]===137&&g[1]===80&&g[2]===78&&g[3]===71?"png":g.length>=3&&g[0]===255&&g[1]===216&&g[2]===255?"jpg":g.length>=6&&g[0]===71&&g[1]===73&&g[2]===70&&g[3]===56&&(g[4]===57||g[4]===55)&&g[5]===97?"gif":g.length>=12&&g[0]===82&&g[1]===73&&g[2]===70&&g[3]===70&&g[8]===87&&g[9]===69&&g[10]===66&&g[11]===80?"webp":null}async function V(E){const S=[],g=["jpg","jpeg","png","gif","webp"];for(const x of E){const m=x.name.split(".").pop()?.toLowerCase();if(!m||!g.includes(m))continue;const b=await M(x);if(!b)continue;if((b==="jpeg"?"jpg":b)!==(m==="jpeg"?"jpg":m)){const A=x.webkitRelativePath||x.name;S.push({file:x,path:A,detectedType:b,actualExtension:m})}}return S}async function j(E){k(a,!0),k(d,[],!0);const S=E.target,g=Array.from(S.files??[]),x=g.filter(N=>{const v=N.name.split(".").pop()?.toLowerCase();return v==="cbz"||v==="zip"}),m=g.filter(N=>{const v=N.name.split(".").pop()?.toLowerCase(),A=N.type;return v!=="cbz"&&v!=="zip"&&_.includes(v??"")&&u.includes(A)}),b=[];for(const N of x)try{const v=await h(N);b.push(...v)}catch(v){console.error(`Error extracting ${N.name}:`,v)}e([...m,...b]),console.log("Selected files:",e()),k(a,!1),k(l,!0),k(d,await V(e()),!0),k(l,!1),o(d).length===0&&t.onDone()}function I(E){o(s)?.click()}var O=on(),G=f(O);G.__click=I;var H=c(f(G),2);H.webkitdirectory=!0,H.multiple=!0,H.__change=j,St(H,E=>k(s,E),()=>o(s)),p(G);var Y=c(G,2);{var B=E=>{var S=rn(),g=c(f(S),2),x=f(g,!0);p(g);var m=c(g,2);{var b=N=>{var v=nn(),A=f(v,!0);p(v),D(()=>J(A,o(i))),F(N,v)};Z(m,N=>{o(i)&&N(b)})}p(S),D(()=>J(x,o(a)?"Processing files...":"Validating files...")),F(E,S)};Z(Y,E=>{(o(a)||o(l))&&E(B)})}var C=c(Y,2);{var w=E=>{var S=an(),g=f(S),x=f(g);p(g);var m=c(g,2);xe(m,21,()=>o(d),Fe,(b,N)=>{let v=()=>o(N).path,A=()=>o(N).detectedType,U=()=>o(N).actualExtension;var q=sn(),X=f(q),se=f(X,!0);p(X);var K=c(X,2),Q=c(f(K)),ie=f(Q);p(Q);var ne=c(Q,2),oe=f(ne);p(ne),p(K),p(q),D(()=>{J(se,v()),J(ie,`.${U()??""}`),J(oe,`.${A()??""}`)}),F(b,q)}),p(m),p(S),D(()=>J(x,`Found ${o(d).length??""} file${o(d).length===1?"":"s"} with incorrect
				extensions:`)),F(E,S)};Z(C,E=>{o(d).length>0&&E(w)})}p(O),D(()=>{we(G,1,`uno-gob8cp ${r()??""}`),G.disabled=o(a)||o(l)}),F(n,O),ve()}Ee(["click","change"]);var un=R('<p class="uno-gcb561"> </p>'),dn=R('<p class="uno-db86t5">Validating...</p>'),cn=R('<div class="uno-6sm0q7"><div class="uno-dtn9ds"><p class="uno-bk54g7"> </p> <p class="uno-j9i8ts"> </p></div> <button type="button" class="uno-yltzkr" aria-label="Remove" title="Remove"><div class="uno-oz5j6k"></div></button></div>'),pn=R('<div class="uno-dkzd2u"></div>'),fn=R('<div class="uno-kktp2u"><div class="uno-td2fqv"><div class="uno-dtn9ds"><label for="group-id-input" class="uno-zd69eo">Group ID:</label> <input class="uno-ko9not" id="group-id-input" type="text" placeholder="Enter group ID"/></div> <button class="uno-mx7466" type="button">Add Group</button> <!> <!> <!></div></div>');function gn(n,t){ge(t,!0);const e="https://api.weebdex.org/group",r=Ze(Ft);if(!r)throw new Error("TargetingGroupValidator must be used within a component that provides ApiAuthContext context");const s=Ze(Ke);if(!s)throw new Error("TargetingGroupValidator must be used within a component that provides TargetingState context");let a=L(""),i=L(!1),d=L(null),l=L(null);function u(w,E){if(s.availableScanGroups.find(g=>g.groupId===w))return;const S=new kt;S.groupId=w,S.groupName=E,s.availableScanGroups=[...s.availableScanGroups,S]}function _(w){s.availableScanGroups=s.availableScanGroups.filter(E=>E.groupId!==w)}async function h(){if(!o(a).trim()){k(d,"Please enter a group ID");return}const w=r.apiToken;if(!w){k(d,"No API token found");return}k(i,!0),k(d,null);try{const E=`${e}/${o(a).trim()}`,S=await fetch(E,{headers:{Authorization:`Bearer ${w}`}});if(S.ok){const g=await S.json();k(l,g,!0),u(o(a).trim(),g.name),k(d,null)}else k(d,`Failed to validate series: ${S.status} ${S.statusText}`)}catch(E){k(d,E instanceof Error?E.message:"Failed to validate series",!0)}finally{k(i,!1)}}var P=fn(),M=f(P),V=f(M),j=c(f(V),2);le(j),p(V);var I=c(V,2);I.__click=h;var O=c(I,2);{var G=w=>{var E=un(),S=f(E,!0);p(E),D(()=>J(S,o(d))),F(w,E)};Z(O,w=>{o(d)&&w(G)})}var H=c(O,2);{var Y=w=>{var E=dn();F(w,E)};Z(H,w=>{o(i)&&w(Y)})}var B=c(H,2);{var C=w=>{var E=pn();xe(E,21,()=>s.availableScanGroups,Fe,(S,g)=>{var x=cn(),m=f(x),b=f(m),N=f(b,!0);p(b);var v=c(b,2),A=f(v,!0);p(v),p(m);var U=c(m,2);U.__click=()=>_(o(g).groupId),p(x),D(()=>{J(N,o(g).groupId),J(A,o(g).groupName)}),F(S,x)}),p(E),F(w,E)};Z(B,w=>{s.availableScanGroups.length>0&&w(C)})}p(M),p(P),D(()=>{j.disabled=o(i),I.disabled=o(i)}),Ie(j,()=>o(a),w=>k(a,w)),F(n,P),ve()}Ee(["click"]);var vn=R('<img class="uno-nxxp44"/>'),hn=R('<div class="uno-qetgxl"></div>'),mn=R('<div class="uno-iwkknw"></div>'),bn=R('<div class="uno-wh6kcz"><span class="uno-6atr7t">Page deleted</span></div>'),_n=R('<button aria-label="Delete page" class="uno-x6no3p"><div class="uno-hcwd2d"></div></button>'),yn=R('<button aria-label="Restore page" class="uno-m81k9t"><div class="uno-60j01b"></div></button>'),En=R('<div class="uno-ezvmq6"><!> <!> <div class="uno-mb41n8"><span class="uno-6atr7t"> </span></div> <!></div>'),wn=R('<div class="uno-2sw5oq"></div>');function Nn(n,t){ge(t,!0);let e=ue(t,"pages",31,()=>me([]));function r(d){return URL.createObjectURL(d)}function s(d){e(e()[d].isDeleted=!0,!0)}function a(d){e(e()[d].isDeleted=!1,!0)}var i=wn();xe(i,21,e,Fe,(d,l,u)=>{var _=En(),h=f(_);{var P=C=>{var w=vn();D(E=>{je(w,"src",E),je(w,"alt",o(l).pageName)},[()=>r(o(l).pageFile)]),F(C,w)},M=C=>{var w=Me(),E=ze(w);{var S=x=>{var m=hn();F(x,m)},g=x=>{var m=mn();F(x,m)};Z(E,x=>{o(l).pageType===Ue.CHAPTER_DEFINITION_FILE?x(S):x(g,!1)},!0)}F(C,w)};Z(h,C=>{o(l).pageType===Ue.CHAPTER_PAGE?C(P):C(M,!1)})}var V=c(h,2);{var j=C=>{var w=bn();F(C,w)};Z(V,C=>{o(l).isDeleted&&C(j)})}var I=c(V,2),O=f(I),G=f(O,!0);p(O),p(I);var H=c(I,2);{var Y=C=>{var w=_n();w.__click=()=>s(u),F(C,w)},B=C=>{var w=yn();w.__click=()=>a(u),F(C,w)};Z(H,C=>{o(l).isDeleted?C(B,!1):C(Y)})}p(_),D(()=>J(G,o(l).pageName)),F(d,_)}),p(i),F(n,i),ve()}Ee(["click"]);function Tn(n){return{en:"gb",af:"za",sq:"al",ar:"sa",az:"az",eu:"es",be:"by",bn:"bd",bg:"bg",my:"mm",ca:"es",zh:"cn","zh-hk":"hk",cv:"ru",hr:"hr",cs:"cz",da:"dk",nl:"nl",eo:"eo",et:"ee",tl:"ph",fi:"fi",fr:"fr",ka:"ge",de:"de",el:"gr",he:"il",hi:"in",hu:"hu",id:"id",jv:"id",ga:"ie",it:"it",ja:"jp",kk:"kz",ko:"kr",la:"va",lt:"lt",ms:"my",mn:"mn",ne:"np",no:"no",fa:"ir",pl:"pl",pt:"pt","pt-br":"br",ro:"ro",ru:"ru",sr:"rs",sk:"sk",sl:"si",es:"es","es-la":"mx",sv:"se",tam:"in",te:"in",th:"th",tr:"tr",uk:"ua",ur:"pk",uz:"uz",vi:"vn"}[n]||n}function In(n){if(n==="eo")return"ðŸŒ";const t=n.toUpperCase().split("").map(e=>127397+e.charCodeAt(0));return String.fromCodePoint(...t)}function Sn(n){const t=Tn(n);return In(t)}function Ct(n){return`${Sn(n.id)} ${n.name}`}const Qe=[{id:"en",name:"English"},{id:"af",name:"Afrikaans"},{id:"sq",name:"Albanian"},{id:"ar",name:"Arabic"},{id:"az",name:"Azerbaijani"},{id:"eu",name:"Basque"},{id:"be",name:"Belarusian"},{id:"bn",name:"Bengali"},{id:"bg",name:"Bulgarian"},{id:"my",name:"Burmese"},{id:"ca",name:"Catalan"},{id:"zh",name:"Chinese (Simplified)"},{id:"zh-hk",name:"Chinese (Traditional)"},{id:"cv",name:"Chuvash"},{id:"hr",name:"Croatian"},{id:"cs",name:"Czech"},{id:"da",name:"Danish"},{id:"nl",name:"Dutch"},{id:"eo",name:"Esperanto"},{id:"et",name:"Estonian"},{id:"tl",name:"Filipino"},{id:"fi",name:"Finish"},{id:"fr",name:"French"},{id:"ka",name:"Georgian"},{id:"de",name:"German"},{id:"el",name:"Greek"},{id:"he",name:"Hebrew"},{id:"hi",name:"Hindi"},{id:"hu",name:"Hungarian"},{id:"id",name:"Indonesian"},{id:"jv",name:"Javanese"},{id:"ga",name:"Irish"},{id:"it",name:"Italian"},{id:"ja",name:"Japanese"},{id:"kk",name:"Kazakh"},{id:"ko",name:"Korean"},{id:"la",name:"Latin"},{id:"lt",name:"Lithuanian"},{id:"ms",name:"Malay"},{id:"mn",name:"Mongolian"},{id:"ne",name:"Nepali"},{id:"no",name:"Norwegian"},{id:"fa",name:"Persian"},{id:"pl",name:"Polish"},{id:"pt",name:"Portuguese"},{id:"pt-br",name:"Portuguese (Brazil)"},{id:"ro",name:"Romanian"},{id:"ru",name:"Russian"},{id:"sr",name:"Serbian"},{id:"sk",name:"Slovak"},{id:"sl",name:"Slovenian"},{id:"es",name:"Spanish"},{id:"es-la",name:"Spanish (LATAM)"},{id:"sv",name:"Swedish"},{id:"tam",name:"Tamil"},{id:"te",name:"Telugu"},{id:"th",name:"Thai"},{id:"tr",name:"Turkish"},{id:"uk",name:"Ukranian"},{id:"ur",name:"Urdu"},{id:"uz",name:"Uzbek"},{id:"vi",name:"Vietnamese"}];var kn=R('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),xn=R('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),Fn=R('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),Cn=R('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),An=R('<button type="button" class="uno-erk55q" title="Revert manual edit"><div class="uno-jugmv0"></div></button>'),Pn=R('<div class="uno-ax06g0"></div>'),Rn=R('<div class="uno-d9abuh"></div>'),zn=R('<div aria-label="Collapse" class="uno-wx2jg6"></div>'),jn=R('<div aria-label="Expand" class="uno-op2jdb"></div>'),On=R('<div class="uno-rw00hm"><!></div>'),Vn=R('<div><div class="uno-e2gvxs"><div class="uno-j7zfdb"><div class="uno-h58bnc"><span class="uno-54xv4y"> </span> <div class="uno-h58bnc"><span class="uno-vv4s5f">Vol.</span> <!> <!></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Ch.</span> <!> <!></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Groups:</span> <!> <!></div></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Original:</span> <p class="uno-vv4s5f"> </p></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Title:</span> <!> <!></div> <div class="uno-h58bnc"><span class="uno-vv4s5f">Language:</span> <!> <!></div></div> <button type="button" class="uno-khevc7" title="Delete chapter"><!></button> <button type="button" class="uno-as3ag3"><!></button></div> <!></div>');function Gn(n,t){if(ge(t,!0),!Ze(Ke))throw new Error("TargetedChapterEditor must be used within a component that provides TargetingState context");const r=ue(t,"chapter",15);let s=L(!1),a=L(!1);Se(()=>{!o(a)&&r()&&(r().originalFieldValues.has("language")||r().originalFieldValues.set("language",r().language),k(a,!0))}),Se(()=>{if(o(a)&&r()&&r().originalFieldValues.has("language")){const T=r().originalFieldValues.get("language");r().language!==T&&!r().manuallyEditedFields.has("language")&&r().manuallyEditedFields.add("language")}});function i(){k(s,!o(s))}function d(T){if(r().originalFieldValues.has(T)){const z=r().originalFieldValues.get(T);T==="title"?r(r().chapterTitle=z,!0):T==="volume"?r(r().chapterVolume=z,!0):T==="chapterNumber"?r(r().chapterNumber=z,!0):T==="groups"?r(r().associatedGroup.groupIds=z?[...z]:null,!0):T==="language"&&r(r().language=z,!0),r().manuallyEditedFields.delete(T),r().originalFieldValues.delete(T)}}function l(){r(r().isDeleted=!r().isDeleted,!0)}var u=Vn(),_=f(u),h=f(_),P=f(h),M=f(P),V=f(M);p(M);var j=c(M,2),I=c(f(j),2);st(I,{textClass:"text-sm text-muted",fieldName:"volume",get chapter(){return r()},get value(){return r().chapterVolume},set value(T){r(r().chapterVolume=T,!0)}});var O=c(I,2);{var G=T=>{var z=kn();z.__click=ee=>{ee.stopPropagation(),d("volume")},F(T,z)};Z(O,T=>{r().manuallyEditedFields.has("volume")&&T(G)})}p(j);var H=c(j,2),Y=c(f(H),2);st(Y,{textClass:"text-sm text-muted",fieldName:"chapterNumber",get chapter(){return r()},get value(){return r().chapterNumber},set value(T){r(r().chapterNumber=T,!0)}});var B=c(Y,2);{var C=T=>{var z=xn();z.__click=ee=>{ee.stopPropagation(),d("chapterNumber")},F(T,z)};Z(B,T=>{r().manuallyEditedFields.has("chapterNumber")&&T(C)})}p(H);var w=c(H,2),E=c(f(w),2);xt(E,{fieldName:"groups",get chapter(){return r()},get groups(){return r().associatedGroup},set groups(T){r(r().associatedGroup=T,!0)}});var S=c(E,2);{var g=T=>{var z=Fn();z.__click=ee=>{ee.stopPropagation(),d("groups")},F(T,z)};Z(S,T=>{r().manuallyEditedFields.has("groups")&&T(g)})}p(w),p(P);var x=c(P,2),m=c(f(x),2),b=f(m,!0);p(m),p(x);var N=c(x,2),v=c(f(N),2);st(v,{class:"",textClass:"text-xl font-bold text-app",fieldName:"title",get chapter(){return r()},get value(){return r().chapterTitle},set value(T){r(r().chapterTitle=T,!0)}});var A=c(v,2);{var U=T=>{var z=Cn();z.__click=ee=>{ee.stopPropagation(),d("title")},F(T,z)};Z(A,T=>{r().manuallyEditedFields.has("title")&&T(U)})}p(N);var q=c(N,2),X=c(f(q),2);{let T=be(()=>Qe.map(z=>z.id));Je(X,{get items(){return o(T)},getDisplayText:z=>{const ee=Qe.find(Ce=>Ce.id===z);return ee?Ct(ee):z},class:"uno-6nex0u",get selectedItem(){return r().language},set selectedItem(z){r(r().language=z,!0)}})}var se=c(X,2);{var K=T=>{var z=An();z.__click=ee=>{ee.stopPropagation(),d("language")},F(T,z)};Z(se,T=>{r().manuallyEditedFields.has("language")&&T(K)})}p(q),p(h);var Q=c(h,2);Q.__click=l;var ie=f(Q);{var ne=T=>{var z=Pn();F(T,z)},oe=T=>{var z=Rn();F(T,z)};Z(ie,T=>{r().isDeleted?T(ne):T(oe,!1)})}p(Q);var _e=c(Q,2);_e.__click=i;var Ge=f(_e);{var Be=T=>{var z=zn();F(T,z)},ke=T=>{var z=jn();F(T,z)};Z(Ge,T=>{o(s)?T(Be):T(ke,!1)})}p(_e),p(_);var ye=c(_,2);{var Ne=T=>{var z=On(),ee=f(z);Nn(ee,{get pages(){return r().pages},set pages(Ce){r(r().pages=Ce,!0)}}),p(z),F(T,z)};Z(ye,T=>{o(s)&&T(Ne)})}p(u),D(()=>{we(u,1,Te(["uno-gqkv0r",t.class])),J(V,`${t.index+1}.`),J(b,r().originalFolderPath)}),F(n,u),ve()}Ee(["click"]);var Ln=R('<div class="uno-am3dzj"><p>Range:</p> <input type="number" placeholder="Start" class="uno-bp9lvd"/> <p>to</p> <input type="number" placeholder="End" class="uno-bp9lvd"/></div>');function Le(n,t){ge(t,!0);let e=ue(t,"rangeStart",15,null),r=ue(t,"rangeEnd",15,null);Se(()=>{e()!==null&&r()!==null&&r()<e()&&r(e())});var s=Ln(),a=c(f(s),2);le(a);var i=c(a,4);le(i),p(s),D((d,l)=>{je(a,"min",t.min),je(a,"max",d),je(i,"min",l),je(i,"max",t.max)},[()=>r()!==null?Math.min(t.max,r()):t.max,()=>e()!==null?Math.max(t.min,e()):t.min]),Ie(a,e),Ie(i,r),F(n,s),ve()}var Mn=R(`<div class="uno-hv8hef"><p class="uno-nt4u1e">Here you have the ability to batch apply changes to all chapters at once. <br/> For title / volume / chapter number extraction, Regex is used, where the first capture group will
		be used to set the value. You can use as many non-capturing groups as you want, and they will be
		ignored. <br/> Should batch editing not be enough, you can manually edit each chapter property individually by clicking
		on it, including removing pages (click on a chapter and it'll expand to show the pages). <br/> You are also able to assign groups to chapters, but for this you first need to register them with
		Group Preparation above. <br/> Groups will be applied to all chapters by default, or to the range if specified (values are inclusive) <br/> Some regexes are prefilled for you, but you can change them for your specific needs.</p> <div class="uno-iuzx0s"><p class="uno-tfn8jv">Quick unfuckup actions:</p> <button type="button" class="uno-c8n574">Clear Titles</button> <button type="button" class="uno-c8n574">Reset Titles</button></div> <form class="uno-vr0h6j"><div class="uno-6patty"><p class="uno-tfn8jv">Extract Title Regex:</p> <input type="text" placeholder="^(.+?)\\s+-\\s+Vol" class="uno-d22hha"/></div> <div class="uno-3lkpn9"><label class="uno-yrku2g"><input type="checkbox" class="uno-0xzuhw"/> <span class="uno-nt4u1e">Case Sensitive</span></label> <!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-6patty"><p class="uno-tfn8jv">Extract Volume Regex:</p> <input type="text" placeholder="Vol\\.? ?(\\d+)" class="uno-d22hha"/></div> <div class="uno-3lkpn9"><label class="uno-yrku2g"><input type="checkbox" class="uno-0xzuhw"/> <span class="uno-nt4u1e">Case Sensitive</span></label> <!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-6patty"><p class="uno-tfn8jv">Extract Chapter Number Regex:</p> <input type="text" placeholder="Ch\\.? ?(\\d+)" class="uno-d22hha"/></div> <div class="uno-3lkpn9"><label class="uno-yrku2g"><input type="checkbox" class="uno-0xzuhw"/> <span class="uno-nt4u1e">Case Sensitive</span></label> <!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-3lkpn9"><p class="uno-tfn8jv">Assign Volume to All Chapters:</p> <input type="text" placeholder="Volume number" class="uno-gz6zwy"/></div> <div class="uno-3lkpn9"><!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-3lkpn9"><p class="uno-tfn8jv">Assign Language to All Chapters:</p> <!></div> <div class="uno-3lkpn9"><!> <button type="submit" class="uno-160w63">Apply</button></div></form> <form class="uno-vr0h6j"><div class="uno-h5li09"><p class="uno-tfn8jv">Assign Groups to All Chapters:</p> <!></div> <div class="uno-3lkpn9"><!> <button type="submit" class="uno-160w63">Set Group(s)</button> <button type="button" class="uno-160w63">Append Group(s)</button></div></form></div>`);function Un(n,t){ge(t,!0);let e=ue(t,"chapters",27,()=>me([])),r=L("- (.+)$"),s=L(!1),a=L("Vol\\.? ?(\\d+)"),i=L(!1),d=L("(?:Ch\\.?|Chapter) ?(\\d+(?:\\.\\d+)?)"),l=L(!1),u=L(me(new ot)),_=L(null),h=L("en");const P=me({start:null,end:null}),M=me({start:null,end:null}),V=me({start:null,end:null}),j=me({start:null,end:null}),I=me({start:null,end:null}),O=me({start:null,end:null});function G(){if(!o(r).trim())return;const y=o(s)?"":"i",re=new RegExp(o(r),y),ae=(j.start??1)-1,$=(j.end??e().length)-1;for(let W=ae;W<=$;W++){const de=e()[W];if(!de.originalFolderPath||de.manuallyEditedFields.has("title"))continue;const he=de.originalFolderPath.match(re);he&&he[1]&&(de.chapterTitle=he[1])}}function H(){if(!o(a).trim())return;const y=o(i)?"":"i",re=new RegExp(o(a),y),ae=(I.start??1)-1,$=(I.end??e().length)-1;for(let W=ae;W<=$;W++){const de=e()[W];if(!de.originalFolderPath||de.manuallyEditedFields.has("volume"))continue;const he=de.originalFolderPath.match(re);he&&he[1]&&(de.chapterVolume=he[1].replace(/^0+/,""))}}function Y(){if(!o(d).trim())return;const y=o(l)?"":"i",re=new RegExp(o(d),y),ae=(O.start??1)-1,$=(O.end??e().length)-1;for(let W=ae;W<=$;W++){const de=e()[W];if(!de.originalFolderPath||de.manuallyEditedFields.has("chapterNumber"))continue;const he=de.originalFolderPath.match(re);he&&he[1]&&(de.chapterNumber=he[1].replace(/^0+/,""))}}function B(){e().forEach(y=>{y.manuallyEditedFields.has("title")||(y.chapterTitle=y.originalFolderPath?.split("/").pop()??"")})}function C(){e().forEach(y=>{y.manuallyEditedFields.has("title")||(y.chapterTitle="")})}function w(){const y=(P.start??1)-1,re=(P.end??e().length)-1,ae=o(u).groupIds??[];for(let $=y;$<=re;$++){const W=e()[$];W.manuallyEditedFields.has("groups")||(W.associatedGroup.groupIds=[...ae])}}function E(){const y=(P.start??1)-1,re=(P.end??e().length)-1,ae=o(u).groupIds??[];for(let $=y;$<=re;$++){const W=e()[$];if(W.manuallyEditedFields.has("groups"))continue;const he=[...W.associatedGroup.groupIds??[],...ae],Mt=[...new Set(he)];W.associatedGroup.groupIds=Mt}}function S(){const y=(M.start??1)-1,re=(M.end??e().length)-1,ae=o(_)?.trim()||null;for(let $=y;$<=re;$++){const W=e()[$];W.manuallyEditedFields.has("volume")||(W.chapterVolume=ae)}}function g(){const y=(V.start??1)-1,re=(V.end??e().length)-1,ae=o(h)?.trim()||"en";for(let $=y;$<=re;$++){const W=e()[$];W.manuallyEditedFields.has("language")||(W.originalFieldValues.set("language",ae),W.language=ae,W.manuallyEditedFields.delete("language"))}}var x=Mn(),m=c(f(x),2),b=c(f(m),2);b.__click=C;var N=c(b,2);N.__click=B,p(m);var v=c(m,2),A=f(v),U=c(f(A),2);le(U),p(A);var q=c(A,2),X=f(q),se=f(X);le(se),fe(2),p(X);var K=c(X,2);Le(K,{min:1,get max(){return e().length},get rangeStart(){return j.start},set rangeStart(y){j.start=y},get rangeEnd(){return j.end},set rangeEnd(y){j.end=y}}),fe(2),p(q),p(v);var Q=c(v,2),ie=f(Q),ne=c(f(ie),2);le(ne),p(ie);var oe=c(ie,2),_e=f(oe),Ge=f(_e);le(Ge),fe(2),p(_e);var Be=c(_e,2);Le(Be,{min:1,get max(){return e().length},get rangeStart(){return I.start},set rangeStart(y){I.start=y},get rangeEnd(){return I.end},set rangeEnd(y){I.end=y}}),fe(2),p(oe),p(Q);var ke=c(Q,2),ye=f(ke),Ne=c(f(ye),2);le(Ne),p(ye);var T=c(ye,2),z=f(T),ee=f(z);le(ee),fe(2),p(z);var Ce=c(z,2);Le(Ce,{min:1,get max(){return e().length},get rangeStart(){return O.start},set rangeStart(y){O.start=y},get rangeEnd(){return O.end},set rangeEnd(y){O.end=y}}),fe(2),p(T),p(ke);var Xe=c(ke,2),et=f(Xe),ct=c(f(et),2);le(ct),p(et);var pt=c(et,2),jt=f(pt);Le(jt,{min:1,get max(){return e().length},get rangeStart(){return M.start},set rangeStart(y){M.start=y},get rangeEnd(){return M.end},set rangeEnd(y){M.end=y}}),fe(2),p(pt),p(Xe);var We=c(Xe,2),tt=f(We),Ot=c(f(tt),2);{let y=be(()=>Qe.map(re=>re.id));Je(Ot,{get items(){return o(y)},getDisplayText:re=>{const ae=Qe.find($=>$.id===re);return ae?Ct(ae):re},class:"uno-c18fgf",get selectedItem(){return o(h)},set selectedItem(re){k(h,re,!0)}})}p(tt);var ft=c(tt,2),Vt=f(ft);Le(Vt,{min:1,get max(){return e().length},get rangeStart(){return V.start},set rangeStart(y){V.start=y},get rangeEnd(){return V.end},set rangeEnd(y){V.end=y}}),fe(2),p(ft),p(We);var nt=c(We,2),rt=f(nt),Gt=c(f(rt),2);xt(Gt,{get groups(){return o(u)},set groups(y){k(u,y,!0)}}),p(rt);var gt=c(rt,2),vt=f(gt);Le(vt,{min:1,get max(){return e().length},get rangeStart(){return P.start},set rangeStart(y){P.start=y},get rangeEnd(){return P.end},set rangeEnd(y){P.end=y}});var Lt=c(vt,4);Lt.__click=E,p(gt),p(nt),p(x),Pe("submit",v,y=>{G(),y.preventDefault()}),Ie(U,()=>o(r),y=>k(r,y)),Ve(se,()=>o(s),y=>k(s,y)),Pe("submit",Q,y=>{H(),y.preventDefault()}),Ie(ne,()=>o(a),y=>k(a,y)),Ve(Ge,()=>o(i),y=>k(i,y)),Pe("submit",ke,y=>{Y(),y.preventDefault()}),Ie(Ne,()=>o(d),y=>k(d,y)),Ve(ee,()=>o(l),y=>k(l,y)),Pe("submit",Xe,y=>{S(),y.preventDefault()}),Ie(ct,()=>o(_),y=>k(_,y)),Pe("submit",We,y=>{g(),y.preventDefault()}),Pe("submit",nt,y=>{w(),y.preventDefault()}),F(n,x),ve()}Ee(["click"]);const At=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Bn=At+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",qn="["+At+"]["+Bn+"]*",Hn=new RegExp("^"+qn+"$");function Pt(n,t){const e=[];let r=t.exec(n);for(;r;){const s=[];s.startIndex=t.lastIndex-r[0].length;const a=r.length;for(let i=0;i<a;i++)s.push(r[i]);e.push(s),r=t.exec(n)}return e}const De=function(n){const t=Hn.exec(n);return!(t===null||typeof t>"u")};function Yn(n){return typeof n<"u"}const Zn={allowBooleanAttributes:!1,unpairedTags:[]};function Kn(n,t){t=Object.assign({},Zn,t);const e=[];let r=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let a=0;a<n.length;a++)if(n[a]==="<"&&n[a+1]==="?"){if(a+=2,a=Nt(n,a),a.err)return a}else if(n[a]==="<"){let i=a;if(a++,n[a]==="!"){a=Tt(n,a);continue}else{let d=!1;n[a]==="/"&&(d=!0,a++);let l="";for(;a<n.length&&n[a]!==">"&&n[a]!==" "&&n[a]!=="	"&&n[a]!==`
`&&n[a]!=="\r";a++)l+=n[a];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),a--),!tr(l)){let h;return l.trim().length===0?h="Invalid space after '<'.":h="Tag '"+l+"' is an invalid name.",te("InvalidTag",h,ce(n,a))}const u=Jn(n,a);if(u===!1)return te("InvalidAttr","Attributes for '"+l+"' have open quote.",ce(n,a));let _=u.value;if(a=u.index,_[_.length-1]==="/"){const h=a-_.length;_=_.substring(0,_.length-1);const P=It(_,t);if(P===!0)r=!0;else return te(P.err.code,P.err.msg,ce(n,h+P.err.line))}else if(d)if(u.tagClosed){if(_.trim().length>0)return te("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",ce(n,i));if(e.length===0)return te("InvalidTag","Closing tag '"+l+"' has not been opened.",ce(n,i));{const h=e.pop();if(l!==h.tagName){let P=ce(n,h.tagStartPos);return te("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+P.line+", col "+P.col+") instead of closing tag '"+l+"'.",ce(n,i))}e.length==0&&(s=!0)}}else return te("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",ce(n,a));else{const h=It(_,t);if(h!==!0)return te(h.err.code,h.err.msg,ce(n,a-_.length+h.err.line));if(s===!0)return te("InvalidXml","Multiple possible root nodes found.",ce(n,a));t.unpairedTags.indexOf(l)!==-1||e.push({tagName:l,tagStartPos:i}),r=!0}for(a++;a<n.length;a++)if(n[a]==="<")if(n[a+1]==="!"){a++,a=Tt(n,a);continue}else if(n[a+1]==="?"){if(a=Nt(n,++a),a.err)return a}else break;else if(n[a]==="&"){const h=Dn(n,a);if(h==-1)return te("InvalidChar","char '&' is not expected.",ce(n,a));a=h}else if(s===!0&&!wt(n[a]))return te("InvalidXml","Extra text at the end",ce(n,a));n[a]==="<"&&a--}}else{if(wt(n[a]))continue;return te("InvalidChar","char '"+n[a]+"' is not expected.",ce(n,a))}if(r){if(e.length==1)return te("InvalidTag","Unclosed tag '"+e[0].tagName+"'.",ce(n,e[0].tagStartPos));if(e.length>0)return te("InvalidXml","Invalid '"+JSON.stringify(e.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return te("InvalidXml","Start tag expected.",1);return!0}function wt(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Nt(n,t){const e=t;for(;t<n.length;t++)if(n[t]=="?"||n[t]==" "){const r=n.substr(e,t-e);if(t>5&&r==="xml")return te("InvalidXml","XML declaration allowed only at the start of the document.",ce(n,t));if(n[t]=="?"&&n[t+1]==">"){t++;break}else continue}return t}function Tt(n,t){if(n.length>t+5&&n[t+1]==="-"&&n[t+2]==="-"){for(t+=3;t<n.length;t++)if(n[t]==="-"&&n[t+1]==="-"&&n[t+2]===">"){t+=2;break}}else if(n.length>t+8&&n[t+1]==="D"&&n[t+2]==="O"&&n[t+3]==="C"&&n[t+4]==="T"&&n[t+5]==="Y"&&n[t+6]==="P"&&n[t+7]==="E"){let e=1;for(t+=8;t<n.length;t++)if(n[t]==="<")e++;else if(n[t]===">"&&(e--,e===0))break}else if(n.length>t+9&&n[t+1]==="["&&n[t+2]==="C"&&n[t+3]==="D"&&n[t+4]==="A"&&n[t+5]==="T"&&n[t+6]==="A"&&n[t+7]==="["){for(t+=8;t<n.length;t++)if(n[t]==="]"&&n[t+1]==="]"&&n[t+2]===">"){t+=2;break}}return t}const Xn='"',Wn="'";function Jn(n,t){let e="",r="",s=!1;for(;t<n.length;t++){if(n[t]===Xn||n[t]===Wn)r===""?r=n[t]:r!==n[t]||(r="");else if(n[t]===">"&&r===""){s=!0;break}e+=n[t]}return r!==""?!1:{value:e,index:t,tagClosed:s}}const Qn=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function It(n,t){const e=Pt(n,Qn),r={};for(let s=0;s<e.length;s++){if(e[s][1].length===0)return te("InvalidAttr","Attribute '"+e[s][2]+"' has no space in starting.",qe(e[s]));if(e[s][3]!==void 0&&e[s][4]===void 0)return te("InvalidAttr","Attribute '"+e[s][2]+"' is without value.",qe(e[s]));if(e[s][3]===void 0&&!t.allowBooleanAttributes)return te("InvalidAttr","boolean attribute '"+e[s][2]+"' is not allowed.",qe(e[s]));const a=e[s][2];if(!er(a))return te("InvalidAttr","Attribute '"+a+"' is an invalid name.",qe(e[s]));if(!r.hasOwnProperty(a))r[a]=1;else return te("InvalidAttr","Attribute '"+a+"' is repeated.",qe(e[s]))}return!0}function $n(n,t){let e=/\d/;for(n[t]==="x"&&(t++,e=/[\da-fA-F]/);t<n.length;t++){if(n[t]===";")return t;if(!n[t].match(e))break}return-1}function Dn(n,t){if(t++,n[t]===";")return-1;if(n[t]==="#")return t++,$n(n,t);let e=0;for(;t<n.length;t++,e++)if(!(n[t].match(/\w/)&&e<20)){if(n[t]===";")break;return-1}return t}function te(n,t,e){return{err:{code:n,msg:t,line:e.line||e,col:e.col}}}function er(n){return De(n)}function tr(n){return De(n)}function ce(n,t){const e=n.substring(0,t).split(/\r?\n/);return{line:e.length,col:e[e.length-1].length+1}}function qe(n){return n.startIndex+n[1].length}const nr={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,t){return t},attributeValueProcessor:function(n,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,t,e){return n},captureMetaData:!1},rr=function(n){return Object.assign({},nr,n)};let $e;typeof Symbol!="function"?$e="@@xmlMetadata":$e=Symbol("XML Node Metadata");class Re{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:e})}addChild(t,e){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),e!==void 0&&(this.child[this.child.length-1][$e]={startIndex:e})}static getMetaDataSymbol(){return $e}}class sr{constructor(t){this.suppressValidationErr=!t}readDocType(t,e){const r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let s=1,a=!1,i=!1,d="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(a&&Ae(t,"!ENTITY",e)){e+=7;let l,u;[l,u,e]=this.readEntityExp(t,e+1,this.suppressValidationErr),u.indexOf("&")===-1&&(r[l]={regx:RegExp(`&${l};`,"g"),val:u})}else if(a&&Ae(t,"!ELEMENT",e)){e+=8;const{index:l}=this.readElementExp(t,e+1);e=l}else if(a&&Ae(t,"!ATTLIST",e))e+=8;else if(a&&Ae(t,"!NOTATION",e)){e+=9;const{index:l}=this.readNotationExp(t,e+1,this.suppressValidationErr);e=l}else if(Ae(t,"!--",e))i=!0;else throw new Error("Invalid DOCTYPE");s++,d=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,s--):s--,s===0)break}else t[e]==="["?a=!0:d+=t[e];if(s!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}readEntityExp(t,e){e=pe(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)r+=t[e],e++;if(He(r),e=pe(t,e),!this.suppressValidationErr){if(t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported")}let s="";return[e,s]=this.readIdentifierVal(t,e,"entity"),e--,[r,s,e]}readNotationExp(t,e){e=pe(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e]);)r+=t[e],e++;!this.suppressValidationErr&&He(r),e=pe(t,e);const s=t.substring(e,e+6).toUpperCase();if(!this.suppressValidationErr&&s!=="SYSTEM"&&s!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${s}"`);e+=s.length,e=pe(t,e);let a=null,i=null;if(s==="PUBLIC")[e,a]=this.readIdentifierVal(t,e,"publicIdentifier"),e=pe(t,e),(t[e]==='"'||t[e]==="'")&&([e,i]=this.readIdentifierVal(t,e,"systemIdentifier"));else if(s==="SYSTEM"&&([e,i]=this.readIdentifierVal(t,e,"systemIdentifier"),!this.suppressValidationErr&&!i))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:r,publicIdentifier:a,systemIdentifier:i,index:--e}}readIdentifierVal(t,e,r){let s="";const a=t[e];if(a!=='"'&&a!=="'")throw new Error(`Expected quoted string, found "${a}"`);for(e++;e<t.length&&t[e]!==a;)s+=t[e],e++;if(t[e]!==a)throw new Error(`Unterminated ${r} value`);return e++,[e,s]}readElementExp(t,e){e=pe(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e]);)r+=t[e],e++;if(!this.suppressValidationErr&&!De(r))throw new Error(`Invalid element name: "${r}"`);e=pe(t,e);let s="";if(t[e]==="E"&&Ae(t,"MPTY",e))e+=4;else if(t[e]==="A"&&Ae(t,"NY",e))e+=2;else if(t[e]==="("){for(e++;e<t.length&&t[e]!==")";)s+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:r,contentModel:s.trim(),index:e}}readAttlistExp(t,e){e=pe(t,e);let r="";for(;e<t.length&&!/\s/.test(t[e]);)r+=t[e],e++;He(r),e=pe(t,e);let s="";for(;e<t.length&&!/\s/.test(t[e]);)s+=t[e],e++;if(!He(s))throw new Error(`Invalid attribute name: "${s}"`);e=pe(t,e);let a="";if(t.substring(e,e+8).toUpperCase()==="NOTATION"){if(a="NOTATION",e+=8,e=pe(t,e),t[e]!=="(")throw new Error(`Expected '(', found "${t[e]}"`);e++;let d=[];for(;e<t.length&&t[e]!==")";){let l="";for(;e<t.length&&t[e]!=="|"&&t[e]!==")";)l+=t[e],e++;if(l=l.trim(),!He(l))throw new Error(`Invalid notation name: "${l}"`);d.push(l),t[e]==="|"&&(e++,e=pe(t,e))}if(t[e]!==")")throw new Error("Unterminated list of notations");e++,a+=" ("+d.join("|")+")"}else{for(;e<t.length&&!/\s/.test(t[e]);)a+=t[e],e++;const d=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!d.includes(a.toUpperCase()))throw new Error(`Invalid attribute type: "${a}"`)}e=pe(t,e);let i="";return t.substring(e,e+8).toUpperCase()==="#REQUIRED"?(i="#REQUIRED",e+=8):t.substring(e,e+7).toUpperCase()==="#IMPLIED"?(i="#IMPLIED",e+=7):[e,i]=this.readIdentifierVal(t,e,"ATTLIST"),{elementName:r,attributeName:s,attributeType:a,defaultValue:i,index:e}}}const pe=(n,t)=>{for(;t<n.length&&/\s/.test(n[t]);)t++;return t};function Ae(n,t,e){for(let r=0;r<t.length;r++)if(t[r]!==n[e+r+1])return!1;return!0}function He(n){if(De(n))return n;throw new Error(`Invalid entity name ${n}`)}const ar=/^[-+]?0x[a-fA-F0-9]+$/,ir=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,or={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function lr(n,t={}){if(t=Object.assign({},or,t),!n||typeof n!="string")return n;let e=n.trim();if(t.skipLike!==void 0&&t.skipLike.test(e))return n;if(n==="0")return 0;if(t.hex&&ar.test(e))return pr(e,16);if(e.search(/.+[eE].+/)!==-1)return dr(n,e,t);{const r=ir.exec(e);if(r){const s=r[1]||"",a=r[2];let i=cr(r[3]);const d=s?n[a.length+1]===".":n[a.length]===".";if(!t.leadingZeros&&(a.length>1||a.length===1&&!d))return n;{const l=Number(e),u=String(l);if(l===0)return l;if(u.search(/[eE]/)!==-1)return t.eNotation?l:n;if(e.indexOf(".")!==-1)return u==="0"||u===i||u===`${s}${i}`?l:n;let _=a?i:e;return a?_===u||s+_===u?l:n:_===u||_===s+u?l:n}}else return n}}const ur=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function dr(n,t,e){if(!e.eNotation)return n;const r=t.match(ur);if(r){let s=r[1]||"";const a=r[3].indexOf("e")===-1?"E":"e",i=r[2],d=s?n[i.length+1]===a:n[i.length]===a;return i.length>1&&d?n:i.length===1&&(r[3].startsWith(`.${a}`)||r[3][0]===a)?Number(t):e.leadingZeros&&!d?(t=(r[1]||"")+r[3],Number(t)):n}else return n}function cr(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function pr(n,t){if(parseInt)return parseInt(n,t);if(Number.parseInt)return Number.parseInt(n,t);if(window&&window.parseInt)return window.parseInt(n,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function fr(n){return typeof n=="function"?n:Array.isArray(n)?t=>{for(const e of n)if(typeof e=="string"&&t===e||e instanceof RegExp&&e.test(t))return!0}:()=>!1}class gr{constructor(t){if(this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"Â¢"},pound:{regex:/&(pound|#163);/g,val:"Â£"},yen:{regex:/&(yen|#165);/g,val:"Â¥"},euro:{regex:/&(euro|#8364);/g,val:"â‚¬"},copyright:{regex:/&(copy|#169);/g,val:"Â©"},reg:{regex:/&(reg|#174);/g,val:"Â®"},inr:{regex:/&(inr|#8377);/g,val:"â‚¹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=vr,this.parseXml=yr,this.parseTextData=hr,this.resolveNameSpace=mr,this.buildAttributesMap=_r,this.isItStopNode=Tr,this.replaceEntitiesValue=wr,this.readStopNodeData=Sr,this.saveTextToParentTag=Nr,this.addChild=Er,this.ignoreAttributesFn=fr(this.options.ignoreAttributes),this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let e=0;e<this.options.stopNodes.length;e++){const r=this.options.stopNodes[e];typeof r=="string"&&(r.startsWith("*.")?this.stopNodesWildcard.add(r.substring(2)):this.stopNodesExact.add(r))}}}}function vr(n){const t=Object.keys(n);for(let e=0;e<t.length;e++){const r=t[e];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:n[r]}}}function hr(n,t,e,r,s,a,i){if(n!==void 0&&(this.options.trimValues&&!r&&(n=n.trim()),n.length>0)){i||(n=this.replaceEntitiesValue(n));const d=this.options.tagValueProcessor(t,n,e,s,a);return d==null?n:typeof d!=typeof n||d!==n?d:this.options.trimValues?dt(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?dt(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function mr(n){if(this.options.removeNSPrefix){const t=n.split(":"),e=n.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(n=e+t[1])}return n}const br=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function _r(n,t,e){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const r=Pt(n,br),s=r.length,a={};for(let i=0;i<s;i++){const d=this.resolveNameSpace(r[i][1]);if(this.ignoreAttributesFn(d,t))continue;let l=r[i][4],u=this.options.attributeNamePrefix+d;if(d.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const _=this.options.attributeValueProcessor(d,l,t);_==null?a[u]=l:typeof _!=typeof l||_!==l?a[u]=_:a[u]=dt(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[u]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){const i={};return i[this.options.attributesGroupName]=a,i}return a}}const yr=function(n){n=n.replace(/\r\n?/g,`
`);const t=new Re("!xml");let e=t,r="",s="";const a=new sr(this.options.processEntities);for(let i=0;i<n.length;i++)if(n[i]==="<")if(n[i+1]==="/"){const l=Oe(n,">",i,"Closing Tag is not closed.");let u=n.substring(i+2,l).trim();if(this.options.removeNSPrefix){const P=u.indexOf(":");P!==-1&&(u=u.substr(P+1))}this.options.transformTagName&&(u=this.options.transformTagName(u)),e&&(r=this.saveTextToParentTag(r,e,s));const _=s.substring(s.lastIndexOf(".")+1);if(u&&this.options.unpairedTags.indexOf(u)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${u}>`);let h=0;_&&this.options.unpairedTags.indexOf(_)!==-1?(h=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):h=s.lastIndexOf("."),s=s.substring(0,h),e=this.tagsNodeStack.pop(),r="",i=l}else if(n[i+1]==="?"){let l=ut(n,i,!1,"?>");if(!l)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,e,s),!(this.options.ignoreDeclaration&&l.tagName==="?xml"||this.options.ignorePiTags)){const u=new Re(l.tagName);u.add(this.options.textNodeName,""),l.tagName!==l.tagExp&&l.attrExpPresent&&(u[":@"]=this.buildAttributesMap(l.tagExp,s,l.tagName)),this.addChild(e,u,s,i)}i=l.closeIndex+1}else if(n.substr(i+1,3)==="!--"){const l=Oe(n,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const u=n.substring(i+4,l-2);r=this.saveTextToParentTag(r,e,s),e.add(this.options.commentPropName,[{[this.options.textNodeName]:u}])}i=l}else if(n.substr(i+1,2)==="!D"){const l=a.readDocType(n,i);this.docTypeEntities=l.entities,i=l.i}else if(n.substr(i+1,2)==="!["){const l=Oe(n,"]]>",i,"CDATA is not closed.")-2,u=n.substring(i+9,l);r=this.saveTextToParentTag(r,e,s);let _=this.parseTextData(u,e.tagname,s,!0,!1,!0,!0);_==null&&(_=""),this.options.cdataPropName?e.add(this.options.cdataPropName,[{[this.options.textNodeName]:u}]):e.add(this.options.textNodeName,_),i=l+2}else{let l=ut(n,i,this.options.removeNSPrefix),u=l.tagName;const _=l.rawTagName;let h=l.tagExp,P=l.attrExpPresent,M=l.closeIndex;this.options.transformTagName&&(u=this.options.transformTagName(u)),e&&r&&e.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,e,s,!1));const V=e;V&&this.options.unpairedTags.indexOf(V.tagname)!==-1&&(e=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),u!==t.tagname&&(s+=s?"."+u:u);const j=i;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,s,u)){let I="";if(h.length>0&&h.lastIndexOf("/")===h.length-1)u[u.length-1]==="/"?(u=u.substr(0,u.length-1),s=s.substr(0,s.length-1),h=u):h=h.substr(0,h.length-1),i=l.closeIndex;else if(this.options.unpairedTags.indexOf(u)!==-1)i=l.closeIndex;else{const G=this.readStopNodeData(n,_,M+1);if(!G)throw new Error(`Unexpected end of ${_}`);i=G.i,I=G.tagContent}const O=new Re(u);u!==h&&P&&(O[":@"]=this.buildAttributesMap(h,s,u)),I&&(I=this.parseTextData(I,u,s,!0,P,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),O.add(this.options.textNodeName,I),this.addChild(e,O,s,j)}else{if(h.length>0&&h.lastIndexOf("/")===h.length-1){u[u.length-1]==="/"?(u=u.substr(0,u.length-1),s=s.substr(0,s.length-1),h=u):h=h.substr(0,h.length-1),this.options.transformTagName&&(u=this.options.transformTagName(u));const I=new Re(u);u!==h&&P&&(I[":@"]=this.buildAttributesMap(h,s,u)),this.addChild(e,I,s,j),s=s.substr(0,s.lastIndexOf("."))}else{const I=new Re(u);this.tagsNodeStack.push(e),u!==h&&P&&(I[":@"]=this.buildAttributesMap(h,s,u)),this.addChild(e,I,s,j),e=I}r="",i=M}}else r+=n[i];return t.child};function Er(n,t,e,r){this.options.captureMetaData||(r=void 0);const s=this.options.updateTag(t.tagname,e,t[":@"]);s===!1||(typeof s=="string"&&(t.tagname=s),n.addChild(t,r))}const wr=function(n){if(this.options.processEntities){for(let t in this.docTypeEntities){const e=this.docTypeEntities[t];n=n.replace(e.regx,e.val)}for(let t in this.lastEntities){const e=this.lastEntities[t];n=n.replace(e.regex,e.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const e=this.htmlEntities[t];n=n.replace(e.regex,e.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function Nr(n,t,e,r){return n&&(r===void 0&&(r=t.child.length===0),n=this.parseTextData(n,t.tagname,e,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,r),n!==void 0&&n!==""&&t.add(this.options.textNodeName,n),n=""),n}function Tr(n,t,e,r){return!!(t&&t.has(r)||n&&n.has(e))}function Ir(n,t,e=">"){let r,s="";for(let a=t;a<n.length;a++){let i=n[a];if(r)i===r&&(r="");else if(i==='"'||i==="'")r=i;else if(i===e[0])if(e[1]){if(n[a+1]===e[1])return{data:s,index:a}}else return{data:s,index:a};else i==="	"&&(i=" ");s+=i}}function Oe(n,t,e,r){const s=n.indexOf(t,e);if(s===-1)throw new Error(r);return s+t.length-1}function ut(n,t,e,r=">"){const s=Ir(n,t+1,r);if(!s)return;let a=s.data;const i=s.index,d=a.search(/\s/);let l=a,u=!0;d!==-1&&(l=a.substring(0,d),a=a.substring(d+1).trimStart());const _=l;if(e){const h=l.indexOf(":");h!==-1&&(l=l.substr(h+1),u=l!==s.data.substr(h+1))}return{tagName:l,tagExp:a,closeIndex:i,attrExpPresent:u,rawTagName:_}}function Sr(n,t,e){const r=e;let s=1;for(;e<n.length;e++)if(n[e]==="<")if(n[e+1]==="/"){const a=Oe(n,">",e,`${t} is not closed`);if(n.substring(e+2,a).trim()===t&&(s--,s===0))return{tagContent:n.substring(r,e),i:a};e=a}else if(n[e+1]==="?")e=Oe(n,"?>",e+1,"StopNode is not closed.");else if(n.substr(e+1,3)==="!--")e=Oe(n,"-->",e+3,"StopNode is not closed.");else if(n.substr(e+1,2)==="![")e=Oe(n,"]]>",e,"StopNode is not closed.")-2;else{const a=ut(n,e,">");a&&((a&&a.tagName)===t&&a.tagExp[a.tagExp.length-1]!=="/"&&s++,e=a.closeIndex)}}function dt(n,t,e){if(t&&typeof n=="string"){const r=n.trim();return r==="true"?!0:r==="false"?!1:lr(n,e)}else return Yn(n)?n:""}const it=Re.getMetaDataSymbol();function kr(n,t){return Rt(n,t)}function Rt(n,t,e){let r;const s={};for(let a=0;a<n.length;a++){const i=n[a],d=xr(i);let l="";if(e===void 0?l=d:l=e+"."+d,d===t.textNodeName)r===void 0?r=i[d]:r+=""+i[d];else{if(d===void 0)continue;if(i[d]){let u=Rt(i[d],t,l);const _=Cr(u,t);i[it]!==void 0&&(u[it]=i[it]),i[":@"]?Fr(u,i[":@"],l,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),s[d]!==void 0&&s.hasOwnProperty(d)?(Array.isArray(s[d])||(s[d]=[s[d]]),s[d].push(u)):t.isArray(d,l,_)?s[d]=[u]:s[d]=u}}}return typeof r=="string"?r.length>0&&(s[t.textNodeName]=r):r!==void 0&&(s[t.textNodeName]=r),s}function xr(n){const t=Object.keys(n);for(let e=0;e<t.length;e++){const r=t[e];if(r!==":@")return r}}function Fr(n,t,e,r){if(t){const s=Object.keys(t),a=s.length;for(let i=0;i<a;i++){const d=s[i];r.isArray(d,e+"."+d,!0,!0)?n[d]=[t[d]]:n[d]=t[d]}}}function Cr(n,t){const{textNodeName:e}=t,r=Object.keys(n).length;return!!(r===0||r===1&&(n[e]||typeof n[e]=="boolean"||n[e]===0))}class Ar{constructor(t){this.externalEntities={},this.options=rr(t)}parse(t,e){if(typeof t!="string"&&t.toString)t=t.toString();else if(typeof t!="string")throw new Error("XML data is accepted in String or Bytes[] form.");if(e){e===!0&&(e={});const a=Kn(t,e);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}const r=new gr(this.options);r.addExternalEntities(this.externalEntities);const s=r.parseXml(t);return this.options.preserveOrder||s===void 0?s:kr(s,this.options)}addEntity(t,e){if(e.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(e==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}static getMetaDataSymbol(){return Re.getMetaDataSymbol()}}var Pr=R('<p class="uno-gv1863">Searching...</p>'),Rr=R('<button class="uno-g4tfb0"><div class="uno-4p27ks"><p class="uno-2h7i51"> </p> <p class="uno-w3tle4"> </p></div> <div class="uno-3y4nf5" aria-label="Add group" title="Add group"></div></button>'),zr=R('<div class="uno-tx6af9"><form class="uno-yiav9y"><div class="uno-n9hnzz"><label for="search-query-input" class="uno-8z898c">Search for a group:</label> <input class="uno-ef6tqv" id="search-query-input" type="text" placeholder="Search for a group"/></div> <button class="uno-kow0um" type="submit">Search</button></form> <div class="uno-3n84nq"><!></div></div>');function jr(n,t){ge(t,!0);const e=Ze(Ke);if(!e)throw new Error("TargetingGroupSearch must be used within a component that provides TargetingState context");let r=L(""),s=L(me([])),a=L(!1);async function i(){if(!(!o(r).trim()||o(r).trim().length<=2||o(a))){k(a,!0);try{const I=await Ht(o(r).trim());k(s,I.data??[],!0)}catch(I){console.error(I)}finally{k(a,!1)}}}function d(I,O){if(e.availableScanGroups.find(H=>H.groupId===I))return;const G=new kt;G.groupId=I,G.groupName=O,e.availableScanGroups=[...e.availableScanGroups,G],k(s,[],!0),k(r,"")}var l=zr(),u=f(l),_=f(u),h=c(f(_),2);le(h),p(_),fe(2),p(u);var P=c(u,2),M=f(P);{var V=I=>{var O=Pr();F(I,O)},j=I=>{var O=Me(),G=ze(O);xe(G,17,()=>o(s),Fe,(H,Y)=>{var B=Rr();B.__click=()=>d(o(Y).id,o(Y).name);var C=f(B),w=f(C),E=f(w,!0);p(w);var S=c(w,2),g=f(S,!0);p(S),p(C),fe(2),p(B),D(()=>{J(E,o(Y).id),J(g,o(Y).name)}),F(H,B)}),F(I,O)};Z(M,I=>{o(a)?I(V):I(j,!1)})}p(P),p(l),Pe("submit",u,I=>{I.preventDefault(),i()}),Ie(h,()=>o(r),I=>k(r,I)),F(n,l),ve()}Ee(["click"]);var Or=R('<div class="uno-dxjz78"><div class="uno-dxjz78"><h2 class="uno-2hnkag">Targeting Preparation (Required)</h2> <!> <!> <!></div> <div class="uno-dxjz78"><h2 class="uno-2hnkag">Group Preparation</h2> <!> <!></div> <div class="uno-dxjz78"><div class="uno-dxjz78"><h2 class="uno-87jryj">Batch Edit</h2> <!></div> <button type="button" class="uno-6s7sce">Start Upload</button> <div class="uno-dxjz78"><div class="uno-rp89gc"><h2 class="uno-87jryj">Chapters</h2> <label class="uno-dsxd6g"><input type="checkbox" class="uno-gtaeaa"/> <span class="uno-i5d3fz">Show only chapters without groups</span></label> <label class="uno-dsxd6g"><input type="checkbox" class="uno-gtaeaa"/> <span class="uno-i5d3fz">Show only non-deleted chapters</span></label></div> <div class="uno-ovwqmg"></div></div></div></div>');function Vr(n,t){ge(t,!0);const e=Ze(Ke);if(!e)throw new Error("TargetingPreparation must be used within a component that provides TargetingState context");let r=be(()=>e.seriesId),s=L(!1),a=L(!0),i=be(()=>{if(!o(s)&&!o(a))return e.chapterStates;let m=e.chapterStates;return o(s)&&(m=m.filter(b=>!b.associatedGroup.groupIds||b.associatedGroup.groupIds.length===0)),o(a)&&(m=m.filter(b=>!b.isDeleted)),m});async function d(m,b,N){let v=null,A=null,U=null;if(m.file.name.toLowerCase()==="comicinfo.xml")try{const K=await m.file.text(),ie=new Ar({ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0,trimValues:!0}).parse(K);if(ie.ComicInfo){const ne=ie.ComicInfo;ne.Title&&(v=ne.Title),ne.Number!==void 0&&ne.Number!==null&&(A=String(ne.Number)),ne.Volume!==void 0&&ne.Volume!==null&&(U=String(ne.Volume))}}catch(K){console.error("Failed to parse ComicInfo.xml:",K)}const X=b.map((K,Q)=>{const ie=K.type===Ue.CHAPTER_PAGE;return new mt(K.file.name,Q,K.file,bt.NOT_STARTED,0,null,null,!ie,K.type)});return new _t(N,v??"",U,A,new at,new ot,X,yt.NOT_STARTED,0,null,null,new lt(N,N,[m,...b],[],0,0),!1,"en")}Se(()=>{(async()=>{const m=await Promise.all(t.selectedFolders.map(async(b,N)=>{const v=b.files.filter(U=>U.type===Ue.CHAPTER_DEFINITION_FILE);if(v.length===1){const U=b.files.filter(q=>q.type!==Ue.CHAPTER_DEFINITION_FILE);return await d(v[0],U,b.path)}const A=b.files.map((U,q)=>{const X=U.type===Ue.CHAPTER_PAGE;return new mt(U.file.name,q,U.file,bt.NOT_STARTED,0,null,null,!X,U.type)});return new _t(b.path,b.name,null,N.toString(),new at,new ot,A,yt.NOT_STARTED,0,null,null,null,!1,"en")}));e.chapterStates=m})()});function l(m){return[...m].sort((b,N)=>{const v=b.chapterVolume,A=N.chapterVolume;if(!(v===null&&A===null)){if(v===null)return 1;if(A===null)return-1;{const X=String(v).localeCompare(String(A),void 0,{numeric:!0,sensitivity:"base"});if(X!==0)return X}}const U=b.chapterNumber,q=N.chapterNumber;return U===null&&q===null?0:U===null?1:q===null?-1:String(U).localeCompare(String(q),void 0,{numeric:!0,sensitivity:"base"})})}Se(()=>{const m=l(e.chapterStates);for(let b=0;b<m.length;b++)if(m[b].originalFolderPath!==e.chapterStates[b].originalFolderPath){e.chapterStates=m;return}}),Se(()=>{e.seriesId!==null&&e.chapterStates.forEach(m=>{m.associatedSeries||(m.associatedSeries=new at),m.associatedSeries.seriesId=e.seriesId??""})});var u=Or(),_=f(u),h=c(f(_),2);Yt(h,{});var P=c(h,2);Zt(P,{});var M=c(P,2);Kt(M,{}),p(_);var V=c(_,2),j=c(f(V),2);gn(j,{});var I=c(j,2);jr(I,{}),p(V);var O=c(V,2),G=f(O),H=c(f(G),2);Un(H,{get chapters(){return e.chapterStates},set chapters(m){e.chapterStates=m}}),p(G);var Y=c(G,2);Y.__click=function(...m){t.onDone?.apply(this,m)};var B=c(Y,2),C=f(B),w=c(f(C),2),E=f(w);le(E),fe(2),p(w);var S=c(w,2),g=f(S);le(g),fe(2),p(S),p(C);var x=c(C,2);xe(x,21,()=>o(i),Fe,(m,b,N)=>{const v=be(()=>e.chapterStates.findIndex(A=>A===o(b)));Gn(m,{index:N,get chapter(){return e.chapterStates[o(v)]},set chapter(A){e.chapterStates[o(v)]=A}})}),p(x),p(B),p(O),p(u),D(()=>Y.disabled=!o(r)),Ve(E,()=>o(s),m=>k(s,m)),Ve(g,()=>o(a),m=>k(a,m)),F(n,u),ve()}Ee(["click"]);var Gr=R('<span class="uno-57st91"></span>'),Lr=R('<span class="uno-wekq8j"></span>'),Mr=R('<span class="uno-vl9lsr"><!></span>'),Ur=R('<span class="uno-ysln7w"></span>'),Br=R('<div class="uno-7tlu5e"><span class="uno-ysln7w"></span> <span class="uno-w0z7mh"></span> <span class="uno-01bs70"> </span> <span class="uno-n4cnqc"> </span></div>'),qr=R('<div class="uno-pkltwb"><!> <!></div>'),Hr=R('<div><button type="button" class="uno-63wdec"><!> <span class="uno-r67jyj"></span> <span class="uno-cfa50z"> </span> <span class="uno-2as1mj"> </span> <span class="uno-bwfsan"> </span></button> <!></div>');function zt(n,t){ge(t,!0);let e=ue(t,"level",3,0),r=ue(t,"class",3,""),s=L(!1);function a(){i&&k(s,!o(s))}const i=t.folder.files.length>0||t.folder.folders.length>0,d=`${e()*5}px`;var l=Hr(),u=f(l);u.__click=a;var _=f(u);{var h=B=>{var C=Mr(),w=f(C);{var E=g=>{var x=Gr();F(g,x)},S=g=>{var x=Lr();F(g,x)};Z(w,g=>{o(s)?g(E):g(S,!1)})}p(C),F(B,C)},P=B=>{var C=Ur();F(B,C)};Z(_,B=>{i?B(h):B(P,!1)})}var M=c(_,4),V=f(M,!0);p(M);var j=c(M,2),I=f(j);p(j);var O=c(j,2),G=f(O);p(O),p(u);var H=c(u,2);{var Y=B=>{var C=qr(),w=f(C);xe(w,17,()=>t.folder.folders,Fe,(S,g)=>{{let x=be(()=>e()+1);zt(S,{get folder(){return o(g)},get level(){return o(x)}})}});var E=c(w,2);xe(E,17,()=>t.folder.files,Fe,(S,g)=>{var x=Br(),m=c(f(x),4),b=f(m,!0);p(m);var N=c(m,2),v=f(N);p(N),p(x),D(A=>{Ye(x,`padding-left: ${d};`),J(b,o(g).file.name),J(v,`${A??""} KB`)},[()=>(o(g).file.size/1024).toFixed(2)]),F(S,x)}),p(C),D(()=>Ye(C,`margin-left: ${d};`)),F(B,C)};Z(H,B=>{o(s)&&B(Y)})}p(l),D(()=>{we(l,1,Te(["uno-0q6x3s",r()])),Ye(u,`padding-left: ${d};`),u.disabled=!i,J(V,t.folder.name||"Root"),J(I,`L${t.folder.level??""}`),J(G,`(${t.folder.files.length??""} file${t.folder.files.length!==1?"s":""}, ${t.folder.folders.length??""} folder${t.folder.folders.length!==1?"s":""})`)}),F(n,l),ve()}Ee(["click"]);var Yr=R(`<div><h2 class="uno-tuwa1l text-md"> </h2> <div class="uno-dby05x"><div class="uno-41oacz"><div><h3 class="uno-66ploz">Chapter Name Level</h3> <p class="uno-5ik2j2">This is the level at which folders will be grouped into chapters (the L numbering on the
					directory explorer). The folders at this level will be used to group together chapters.</p></div> <!></div> <div class="uno-41oacz"><div><h3 class="uno-66ploz">File Level</h3> <p class="uno-5ik2j2">This is the level at which files inside folders will be considered as being a part of the
					chapter (the L numbering on the directory explorer). Only files contained within folders
					at this level will be considered as being a part of the chapter.</p></div> <!></div></div> <div class="uno-41oacz"><div><h3 class="uno-66ploz">File Path Filter</h3> <p class="uno-5ik2j2">This is a regex filter that will be applied in addition to the file level selector. This is
				useful if you have multiple files at the same file level, but are only really interested in
				a subset of them.</p></div> <div class="uno-tf0zt3"><button type="button" class="uno-786krg">Set Example Exclusion Regex</button> <button type="button" class="uno-786krg">Set Example Inclusion Regex</button> <div class="uno-ahr0cj"><input type="checkbox" class="uno-mzfs6x"/> <label for="isRegexCaseSensitive" class="uno-5ik2j2">Case Sensitive</label></div></div> <input type="text" placeholder="Filter files by path regex..." class="uno-fzo9yc"/></div></div>`);function Zr(n,t){ge(t,!0);let e=ue(t,"class",3,""),r=ue(t,"slicedFolders",15,null),s=be(()=>t.selectedFolder.depth),a=L("1"),i=L("1"),d=L(""),l=L(!1);Se(()=>{o(a)&&o(i)&&parseInt(o(i))<parseInt(o(a))&&k(i,o(a),!0);const b=u(parseInt(o(a)),t.selectedFolder),N=h(b,o(d));N.sort((v,A)=>v.name.localeCompare(A.name)),r(N)});function u(b,N){let v=[];for(const A of N.folders){if(A.level===b){v.push(A);continue}A.level<b&&v.push(...u(b,A))}return v}function _(b){const N=b.files;let v=[];for(const A of b.folders)v.push(..._(A));return[...N,...v]}function h(b,N){let v=[];const A=N.trim();if(A===""){for(const q of b){const X=_(q);X.length!==0&&v.push(new lt(q.name,q.path,X,[],q.level,0))}return v}const U=new RegExp(A,o(l)?"g":"gi");for(const q of b){const se=_(q).filter(K=>U.test(K.path));se.length!==0&&v.push(new lt(q.name,q.path,se,[],q.level,0))}return v}function P(){k(d,"^(?!.*filename).*$")}function M(){k(d,"filename")}var V=Yr(),j=f(V),I=f(j);p(j);var O=c(j,2),G=f(O),H=c(f(G),2);{let b=be(()=>Array.from({length:o(s)},(N,v)=>v+1).map(N=>N.toString()));Je(H,{get items(){return o(b)},class:"uno-p2tdxo",get selectedItem(){return o(a)},set selectedItem(N){k(a,N,!0)}})}p(G);var Y=c(G,2),B=c(f(Y),2);{let b=be(()=>Array.from({length:o(s)},(N,v)=>v+1).map(N=>N.toString()));Je(B,{get items(){return o(b)},class:"uno-p2tdxo",get selectedItem(){return o(i)},set selectedItem(N){k(i,N,!0)}})}p(Y),p(O);var C=c(O,2),w=c(f(C),2),E=f(w);E.__click=P;var S=c(E,2);S.__click=M;var g=c(S,2),x=f(g);le(x),fe(2),p(g),p(w);var m=c(w,2);le(m),p(C),p(V),D(()=>{we(V,1,Te(["uno-p7gj2t",e()])),J(I,`Vertical Slice Pane - ${o(s)??""}`)}),Ve(x,()=>o(l),b=>k(l,b)),Ie(m,()=>o(d),b=>k(d,b)),F(n,V),ve()}Ee(["click"]);var Kr=R('<button class="uno-ib5962"><div class="uno-xqpedf"><p class="uno-9fhwl6"><span class="uno-kgt3zb">Path:</span> </p> <div class="uno-rgzzux"><p class="uno-9fhwl6"><span class="uno-kgt3zb">Name:</span> </p> <p class="uno-9fhwl6"><span class="uno-kgt3zb">Files:</span> </p></div></div> <input type="checkbox" class="uno-drnypz"/></button>');function Xr(n,t){ge(t,!0);let e=ue(t,"selectedSlicedFolder",15,null);function r(){e(e().isSelected=!e().isSelected,!0)}var s=Kr();s.__click=r;var a=f(s),i=f(a),d=c(f(i));p(i);var l=c(i,2),u=f(l),_=c(f(u));p(u);var h=c(u,2),P=c(f(h));p(h),p(l),p(a);var M=c(a,2);le(M),p(s),D(()=>{J(d,` ${e().folder.path??""}`),J(_,` ${e().folder.name??""}`),J(P,` ${e().folder.files.length??""}`)}),Ve(M,()=>e().isSelected,V=>e(e().isSelected=V,!0)),F(n,s),ve()}Ee(["click"]);var Wr=R("<div></div>");function Jr(n,t){ge(t,!0);let e=ue(t,"class",3,""),r=ue(t,"selectedSlicedFolders",31,()=>me([]));Se(()=>{r(t.slicedFolders.map(a=>({folder:a,isSelected:!0})))});var s=Wr();xe(s,21,r,Fe,(a,i,d)=>{Xr(a,{get selectedSlicedFolder(){return r()[d]},set selectedSlicedFolder(l){r(r()[d]=l,!0)}})}),p(s),D(()=>we(s,1,Te(["uno-c09693",e()]))),F(n,s),ve()}var Qr=R('<div><h2 class="uno-big2dz text-md"> </h2> <!></div> <button type="button" class="uno-4mp1rf">Continue to Editor</button>',1),$r=R('<div><h1 class="uno-5gcp3l">Vertical Slicer</h1> <div class="uno-0l5rnf"><div><h2 class="uno-u2fo5v text-md">Directory Explorer</h2></div> <div class="uno-uwenez"></div> <div class="uno-7k8lj1"><h2 class="uno-big2dz text-md">Slicer</h2></div></div> <div class="uno-0402h6"><div class="uno-z8ysy7"><!></div> <button type="button" class="uno-1es7ju group" aria-label="Resize panels"><div class="uno-gtkyu2"><div class="uno-amtufd"></div> <div class="uno-amtufd"></div> <div class="uno-amtufd"></div></div></button> <div class="uno-w96zyv"><!></div></div> <!></div>');function Dr(n,t){ge(t,!0);let e=ue(t,"finalizedFolderSelection",15,null),r=ue(t,"class",3,""),s=L(null),a=L(me([])),i=be(()=>o(a).filter(g=>g.isSelected)),d=be(()=>Xt(t.selectedFiles??[])),l=L(null),u=L(!1),_=L(20);function h(){e(o(i).map(g=>g.folder)),t.onDone()}function P(g){k(u,!0)}function M(g){if(!o(u)||!o(l))return;const x=o(l).getBoundingClientRect(),m=(g.clientX-x.left)/x.width*100;k(_,Math.max(20,Math.min(80,m)),!0)}function V(){k(u,!1)}Se(()=>{if(o(u))return document.addEventListener("mousemove",M),document.addEventListener("mouseup",V),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",V),document.body.style.cursor="",document.body.style.userSelect=""}});var j=$r(),I=c(f(j),2),O=f(I);fe(4),p(I);var G=c(I,2),H=f(G),Y=f(H);zt(Y,{get folder(){return o(d)}}),p(H);var B=c(H,2);B.__mousedown=P;var C=c(B,2),w=f(C);Zr(w,{get selectedFolder(){return o(d)},get slicedFolders(){return o(s)},set slicedFolders(g){k(s,g,!0)}}),p(C),p(G),St(G,g=>k(l,g),()=>o(l));var E=c(G,2);{var S=g=>{var x=Qr(),m=ze(x),b=f(m),N=f(b);p(b);var v=c(b,2);Jr(v,{get slicedFolders(){return o(s)},class:"uno-xmletc",get selectedSlicedFolders(){return o(a)},set selectedSlicedFolders(U){k(a,U,!0)}}),p(m);var A=c(m,2);A.__click=h,D(()=>{J(N,`Vertical Slice Preview (${o(i).length??""}
				selected)`),A.disabled=o(i).length===0}),F(g,x)};Z(E,g=>{o(s)&&g(S)})}p(j),D(()=>{we(j,1,`uno-xxsekz ${r()??""}`),Ye(O,`width: ${o(_)??""}%;`),Ye(H,`width: ${o(_)??""}%;`)}),F(n,j),ve()}Ee(["mousedown","click"]);var es=R("<p>todo: finished</p>"),ts=R('<div class="uno-r204ub"><div class="uno-kd0tpq"><h1 class="uno-oq6hfo">Uploader Improved</h1> <div class="uno-b6vj60"><button type="button" class="uno-affps4">Guided Mode</button> <!></div></div> <a target="_blank" class="uno-io1u0r">Tutorial & Docs</a> <!> <div class="uno-l3b4kf"><button type="button">Pick Folder</button> <div class="uno-57hmfs"></div> <button type="button">Select Folders</button> <div class="uno-57hmfs"></div> <button type="button">Edit Chapters</button> <div class="uno-57hmfs"></div> <button type="button">Upload</button> <div class="uno-57hmfs"></div> <button type="button">Finished</button></div> <!></div>');function fs(n,t){ge(t,!0);let e=L(null),r=L(null);ht(Ft,new Dt),ht(Ke,new Jt);var s=(v=>(v.PICKING_FOLDER="PICKING_FOLDER",v.SELECTING_FOLDERS="SELECTING_FOLDERS",v.EDITING_CHAPTERS="EDITING_CHAPTERS",v.UPLOADING="UPLOADING",v.FINISHED="FINISHED",v))(s||{});let a=L(!1),i=L("PICKING_FOLDER"),d=be(()=>o(i)==="UPLOADING"&&o(a)),l=be(()=>o(i)!=="UPLOADING"&&o(i)!=="EDITING_CHAPTERS");function u(v){o(e)&&k(i,v,!0)}function _(){k(i,"SELECTING_FOLDERS")}function h(){k(i,"EDITING_CHAPTERS")}function P(){k(i,"UPLOADING")}function M(){k(i,"FINISHED")}var V=ts(),j=f(V),I=c(f(j),2),O=f(I);O.__click=()=>en(Et("/guided"));var G=c(O,2);Wt(G,{}),p(I),p(j);var H=c(j,2),Y=c(H,2);{var B=v=>{Qt(v,{})};Z(Y,v=>{o(l)&&v(B)})}var C=c(Y,2),w=f(C);w.__click=()=>u(s.PICKING_FOLDER);var E=c(w,4);E.__click=()=>u(s.SELECTING_FOLDERS);var S=c(E,4);S.__click=()=>u(s.EDITING_CHAPTERS);var g=c(S,4);g.__click=()=>u(s.UPLOADING);var x=c(g,4);x.disabled=!0,p(C);var m=c(C,2);{var b=v=>{ln(v,{onDone:_,class:"uno-r3xq7g",get selectedFiles(){return o(e)},set selectedFiles(A){k(e,A,!0)}})},N=v=>{var A=Me(),U=ze(A);{var q=se=>{Dr(se,{onDone:h,get selectedFiles(){return o(e)},get finalizedFolderSelection(){return o(r)},set finalizedFolderSelection(K){k(r,K,!0)}})},X=se=>{var K=Me(),Q=ze(K);{var ie=oe=>{Vr(oe,{get selectedFolders(){return o(r)},onDone:P})},ne=oe=>{var _e=Me(),Ge=ze(_e);{var Be=ye=>{$t(ye,{onDone:M,get busy(){return o(a)},set busy(Ne){k(a,Ne,!0)}})},ke=ye=>{var Ne=Me(),T=ze(Ne);{var z=ee=>{var Ce=es();F(ee,Ce)};Z(T,ee=>{o(i)===s.FINISHED&&ee(z)},!0)}F(ye,Ne)};Z(Ge,ye=>{o(i)===s.UPLOADING?ye(Be):ye(ke,!1)},!0)}F(oe,_e)};Z(Q,oe=>{o(i)===s.EDITING_CHAPTERS&&o(r)?oe(ie):oe(ne,!1)},!0)}F(se,K)};Z(U,se=>{o(i)===s.SELECTING_FOLDERS?se(q):se(X,!1)},!0)}F(v,A)};Z(m,v=>{o(i)===s.PICKING_FOLDER?v(b):v(N,!1)})}p(V),D(v=>{je(H,"href",v),we(w,1,Te({"uno-mpkkic":!0,"uno-ywbfsm":o(i)!==s.PICKING_FOLDER,"uno-djdziu":o(i)===s.PICKING_FOLDER})),w.disabled=o(d),we(E,1,Te({"uno-mpkkic":!0,"uno-ywbfsm":o(i)!==s.SELECTING_FOLDERS,"uno-djdziu":o(i)===s.SELECTING_FOLDERS})),E.disabled=!o(e)||o(d),we(S,1,Te({"uno-mpkkic":!0,"uno-ywbfsm":o(i)!==s.EDITING_CHAPTERS,"uno-djdziu":o(i)===s.EDITING_CHAPTERS})),S.disabled=!o(r)||o(d),we(g,1,Te({"uno-mpkkic":!0,"uno-ywbfsm":o(i)!==s.UPLOADING,"uno-djdziu":o(i)===s.UPLOADING})),g.disabled=!o(r)||o(d),we(x,1,Te({"uno-mpkkic":!0,"uno-ywbfsm":o(i)!==s.FINISHED,"uno-djdziu":o(i)===s.FINISHED}))},[()=>Et("/docs")]),F(n,V),ve()}Ee(["click"]);export{fs as component,ps as universal};
